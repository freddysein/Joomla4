/*
 Copyright (c)2009-2022 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"===typeof akeeba)var akeeba={};"undefined"===typeof akeeba.System&&(akeeba.System={},akeeba.System.notification={hasDesktopNotification:!1,iconURL:""},akeeba.System.params={AjaxURL:"",useIFrame:!1,errorCallback:akeeba.System.modalErrorHandler,iFrame:null,iFrameCallbackError:null,iFrameCallbackSuccess:null,password:"",errorDialogId:"errorDialog",errorDialogMessageId:"errorDialogPre"},akeeba.System.translations=[],akeeba.System.modalDialog=null);
akeeba.System.submitForm=function(a,c){"undefined"!==typeof c&&document.querySelector("#"+a+" input[name='task']").setAttribute("value",c);document.querySelector("#"+a).submit()};akeeba.System.defaultErrorHandler=function(a){null!=a&&"undefined"!=typeof a&&alert("An error has occurred\n"+a)};
akeeba.System.modalErrorHandler=function(a){var c=document.getElementById(akeeba.System.params.errorDialogId),b=a;null!=c&&(document.getElementById(akeeba.System.params.errorDialogMessageId).innerHTML=a,b=c.innerHTML);akeeba.Modal.open({content:b,width:"80%"})};akeeba.System.params.errorCallback=akeeba.System.modalErrorHandler;
akeeba.System.doIframeCall=function(a,c,b){akeeba.System.params.iFrameCallbackSuccess=c;akeeba.System.params.iFrameCallbackError=b;akeeba.System.params.iFrame=document.createElement("iframe");document.getElementById("response-timer");akeeba.System.params.iFrame.style.display="none";akeeba.System.params.iFrame.style.visibility="hidden";akeeba.System.params.iFrame.style.height="1px";akeeba.System.params.iFrame.setAttribute("onload",akeeba.System.iframeCallback);a=akeeba.System.params.AjaxURL+"&"+akeeba.Ajax.interpolateParameters(a);
akeeba.System.params.iFrame.setAttribute("src",a)};
akeeba.System.iframeCallback=function(){var a=(akeeba.System.params.iFrame.contentDocument?akeeba.System.params.iFrame.contentDocument:akeeba.System.params.iFrame.contentWindow.document).body.innerHTML;akeeba.System.params.iFrame.parentNode.removeChild(akeeba.System.params.iFrame);akeeba.System.params.iFrame=null;var c=a.indexOf("###");if(-1==c)a="Invalid AJAX data: "+a,null==akeeba.System.params.iFrameCallbackError?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(a):akeeba.System.params.iFrameCallbackError(a);
else{0!=c&&(a.substr(0,c),a=a.substr(c));a=a.substr(3);c=a.lastIndexOf("###");a=a.substr(0,c);try{var b=JSON.parse(a)}catch(d){a=d.message+"\n<br/>\n<pre>\n"+a+"\n</pre>";null==akeeba.System.params.iFrameCallbackError?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(a):akeeba.System.params.iFrameCallbackError(a);return}akeeba.System.params.iFrameCallbackSuccess(b)}};
akeeba.System.doAjax=function(a,c,b,d,g){if(akeeba.System.params.useIFrame)akeeba.System.doIframeCall(a,c,b);else{null==d&&(d=!0);var f=(new Date).getTime()/1E3,k=parseInt(f,10);a._cacheBustingJunk=Math.round(1E3*(f-k))/1E3;null==g&&(g=6E5);a={type:"POST",url:akeeba.System.params.AjaxURL,cache:!1,data:a,timeout:g,success:function(e){var h=e.indexOf("###");if(-1==h)e=akeeba.System.sanitizeErrorMessage(e),e="Invalid AJAX data: "+e,null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(e):
b(e);else{0!=h&&(e.substr(0,h),e=e.substr(h));e=e.substr(3);h=e.lastIndexOf("###");e=e.substr(0,h);try{var m=JSON.parse(e)}catch(l){e=akeeba.System.sanitizeErrorMessage(e);e=l.message+"\n<br/>\n<pre>\n"+e+"\n</pre>";null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(e):b(e);return}c(m)}},error:function(e,h,m){m=e.responseText?e.responseText:"";var l="<strong>AJAX Loading Error</strong><br/>HTTP Status: "+e.status+" ("+e.statusText+")<br/>";l=l+"Internal status: "+
h+"<br/>XHR ReadyState: "+e.readyState+"<br/>";l=l+"Raw server response:<br/>"+akeeba.System.sanitizeErrorMessage(m);null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(l):b(l)}};d?akeeba.Ajax.enqueue(a):akeeba.Ajax.ajax(a)}};akeeba.System.sanitizeErrorMessage=function(a){-1<a.indexOf("<script")&&(a="(HTML containing script tags)");return a};
akeeba.System.doEncryptedAjax=function(a,c,b,d,g){null==d&&(d=!0);var f=(new Date).getTime()/1E3,k=parseInt(f,10);a._cacheBustingJunk=Math.round(1E3*(f-k))/1E3;null==g&&(g=6E5);a={json:JSON.stringify(a)};0<akeeba.System.params.password.length&&(a.password=akeeba.System.params.password);g={type:"POST",url:akeeba.System.params.AjaxURL,cache:!1,data:a,timeout:g,success:function(e){var h=e.indexOf("###");if(-1==h)e="Invalid AJAX data: "+e,null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(e):
b(e);else{0!=h&&(e.substr(0,h),e=e.substr(h));e=e.substr(3);h=e.lastIndexOf("###");e=e.substr(0,h);try{var m=JSON.parse(e)}catch(l){errorMessage=l.message+"\n<br/>\n<pre>\n"+e+"\n</pre>";null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(errorMessage):b(errorMessage);return}c(m)}},error:function(e,h,m){e="AJAX Loading Error: "+h;null==b?null!=akeeba.System.params.errorCallback&&akeeba.System.params.errorCallback(e):b(e)}};d?akeeba.Ajax.enqueue(g):akeeba.Ajax.ajax(g)};
akeeba.System.checkAll=function(a,c){c||(c="cb");if(a.form){for(var b=0,d=0,g=a.form.elements.length;d<g;d++){var f=a.form.elements[d];f.type==a.type&&(c&&0==f.id.indexOf(c)||!c)&&(f.checked=a.checked,b+=1==f.checked?1:0)}a.form.boxchecked&&(a.form.boxchecked.value=b);return!0}return!1};akeeba.System.isChecked=function(a,c){"undefined"===typeof c&&(c=document.getElementById("adminForm"));1==a?c.boxchecked.value++:c.boxchecked.value--};
akeeba.System.tableOrdering=function(a,c,b,d){"undefined"===typeof d&&(d=document.getElementById("adminForm"));d.filter_order.value=a;d.filter_order_Dir.value=c;akeeba.System.submitForm(d.getAttribute("id"),b)};
akeeba.System.modal=function(a){try{"undefined"!==typeof a.rel&&(rel=a.rel,a=JSON.parse(rel))}catch(e){}var c=document.createElement("div");f.setAttribute("tabindex","-1");f.setAttribute("role","dialog");f.setAttribute("aria-hidden","true");f=document.createElement("div");f.className="modal-dialog";c.appendChild(f);var b=document.createElement("div");b.className="modal-content";f.appendChild(b);if("undefined"!==typeof a.title){f=document.createElement("div");f.className="modal-header";b.appendChild(f);
var d=document.createElement("button");d.className="close";d.innerHTML="&times;";f.appendChild(d);var g=document.createElement("h4");g.className="modal-title";g.innerHTML=a.title;f.appendChild(g);"undefined"!==typeof a.CancelHandler&&akeeba.System.addEventListener(d,"click",function(e){var h=a.CancelHandler;akeeba.System.modalDialog.close();h(c);e.preventDefault()})}var f=document.createElement("div");f.className="modal-body";b.appendChild(f);if("undefined"===typeof a.href)f.innerHTML=a.body;else if("#"==
a.href.substr(0,1))for(d=window.document.querySelector(a.href);0<d.childNodes.length;)f.appendChild(d.childNodes[0]);else d=document.createElement("iframe"),d.src=a.href,d.width="100%",d.height=400,d.frameborder=0,d.allowtransparency=!0,f.appendChild(d),"undefined"!==typeof a.iFrameHeight&&(d.height=a.iFrameHeight),"undefined"!==typeof a.iFrameWidth&&(d.width=a.iFrameWidth);f=!0;"undefined"!==typeof a.showButtons&&(f=a.showButtons);if(f){f=document.createElement("div");f.className="modal-footer";
b.appendChild(f);b=akeeba.System.translations["UI-MODAL-OK"];d=akeeba.System.translations["UI-MODAL-CANCEL"];"undefined"!==typeof a.OkLabel&&(b=a.OkLabel);"undefined"!==typeof a.CancelLabel&&(d=a.CancelLabel);g=document.createElement("button");g.className="btn btn-default";g.setAttribute("type","button");g.innerHTML=d;f.appendChild(d);var k=document.createElement("button");k.className="btn btn-primary";k.setAttribute("type","button");k.innerHTML=b;f.appendChild(k);"undefined"!==typeof a.CancelHandler&&
akeeba.System.addEventListener(g,"click",function(e){var h=a.CancelHandler;akeeba.System.modalDialog.close();h(c);e.preventDefault()});"undefined"!==typeof a.OkHandler?akeeba.System.addEventListener(k,"click",function(e){var h=a.OkHandler;akeeba.System.modalDialog.close();h(c);e.preventDefault()}):akeeba.System.addEventListener(k,"click",function(e){akeeba.System.modalDialog.close();e.preventDefault()});""==b.trim()&&(k.style.display="none");""==d.trim()&&(g.style.display="none")}akeeba.System.modalDialog=
akeeba.Modal.open({inherit:c,width:"450",height:"280"})};akeeba.System.notification.askPermission=function(){void 0!=window.Notification&&"default"==window.Notification.permission&&window.Notification.requestPermission()};
akeeba.System.notification.notify=function(a,c,b){void 0!=window.Notification&&"granted"==window.Notification.permission&&(void 0==b&&(b=5E3),void 0==c&&(body=""),a=new window.Notification(a,{body:c,icon:akeeba.System.notification.iconURL}),0<b&&setTimeout(function(d){return function(){d.close()}}(a),b))};
akeeba.System.data=function(){var a=0,c={};return{set:function(b,d,g){if(b.dataset)b.dataset[d]=g,null==g&&delete b.dataset[d];else{if(void 0===b.myCustomDataTag){var f=a++;b.myCustomDataTag=f}"undefined"==typeof c[f]&&(c[f]={});c[f][d]=g;var k="data-"+d.split(/(?=[A-Z])/).join("-").toLowerCase();b.setAttribute&&b.setAttribute(k,g);if(null==g)try{delete c[f][d],b.removeAttribute(k)}catch(e){c[f][d]=null}}},get:function(b,d,g){if(b.dataset)return"undefined"==typeof b.dataset[d]&&(b.dataset[d]=g),b.dataset[d];
"undefined"==typeof g&&(g=null);"undefined"==typeof c[b.myCustomDataTag]&&(c[b.myCustomDataTag]={});var f="data-"+d.split(/(?=[A-Z])/).join("-").toLowerCase();"undefined"!==typeof b[f]&&(c[b.myCustomDataTag][d]=b[f]);"undefined"==typeof c[b.myCustomDataTag][d]&&this.set(b,d,g);return c[b.myCustomDataTag][d]}}}();
akeeba.System.addEventListener=function(a,c,b){function d(g){var f=b.apply(this,arguments);!1===f&&(g.stopPropagation()&&g.stopPropagation(),g.preventDefault?g.preventDefault():g.returnValue=!1);return f}"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.addEventListener?a.addEventListener(c,d,!1):a.attachEvent("on"+c,function(){var g=b.call(a,window.event);!1===g&&(window.event.returnValue=!1,window.event.cancelBubble=!0);return g}))};
akeeba.System.removeEventListener=function(a,c,b){"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.removeEventListener?a.removeEventListener(c,b):a.detachEvent("on"+c,b))};
akeeba.System.triggerEvent=function(a,c){if("undefined"!=typeof a&&null!==a&&("string"===typeof a&&(a=document.getElementById(a)),null!==a&&"object"==typeof a&&a instanceof Element))if("function"===typeof window.jQuery)window.jQuery(a).trigger(c);else if(document.fireEvent&&"undefined"==typeof window.Event)a.fireEvent("on"+c);else{var b=document.createEvent("Event");b.initEvent(c,!0,!0);a.dispatchEvent(b)}};
(function(a,c){function b(){if(!f){f=!0;for(var e=0;e<g.length;e++)g[e].fn.call(window,g[e].ctx);g=[]}}function d(){"complete"===document.readyState&&b()}c=c||akeeba.System;var g=[],f=!1,k=!1;c[a||"documentReady"]=function(e,h){f?setTimeout(function(){e(h)},1):(g.push({fn:e,ctx:h}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(b,1):k||(k=!0,document.addEventListener?(document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",
b,!1)):(document.attachEvent("onreadystatechange",d),window.attachEvent("onload",b))))}})("documentReady",akeeba.System);akeeba.System.addClass=function(a,c){if(a&&a.className){var b=a.className.split(" ");"string"==typeof c&&(c=c.split(" "));b=array_merge(b,c);a.className="";for(var d in b)b.hasOwnProperty(d)&&(a.className+=b[d]+" ");a.className.trim&&(a.className=a.className.trim())}};
akeeba.System.removeClass=function(a,c){if(a&&a.className){var b=a.className.split(" ");"string"==typeof c&&(c=c.split(" "));b=array_diff(b,c);a.className="";for(property in b)b.hasOwnProperty(property)&&(a.className+=b[property]+" ");a.className.trim&&(a.className=a.className.trim())}};akeeba.System.hasClass=function(a,c){if(a&&a.className){a=a.className.split(" ");for(i=0;i<a.length;i++)if(a[i]==c)return!0;return!1}};
akeeba.System.toggleClass=function(a,c){akeeba.System.hasClass(a,c)?akeeba.System.removeClass(a,c):akeeba.System.addClass(a,c)};function empty(a){var c;if(""===a||0===a||"0"===a||null===a||!1===a||"undefined"===typeof a)return!0;if("object"==typeof a){for(c in a)return!1;return!0}return!1}function array_diff(a){var c={},b=arguments.length,d="",g,f="";a:for(d in a)for(g=1;g<b;g++){var k=arguments[g];for(f in k)if(k[f]===a[d])continue a;c[d]=a[d]}return c};
